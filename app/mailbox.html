<!DOCTYPE html>
<html>
<head>
  <!-- Meta attributes -->
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>

  <!-- Title -->
  <title>Dmail</title>

  <!-- Fonts -->
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
  <!-- Page content (excluding footer) -->
  <main>

    <!-- MetaMask not found -->
    <div class="section hide" id="disableMailbox">
      <div class="container">

        <h1 class="header center amber-text">Mailbox Unavailable</h1>

        <div class="row center">
          <h5 class="header col s12 light">Please install <a href="https://metamask.io/">MetaMask</a> before you proceed!</h5>
        </div>

        <div class="row center">
          <h5 class="header col s12 light">MetaMask acts as a bridge between the Internet and the Ethereum blockchain. Your mailbox needs it to function correctly.</h5>
        </div>

      </div>
    </div>

    <!-- Enter Ethereum address -->
    <div class="section hide" id="accessMailbox">
      <div class="container">

        <h1 class="header center amber-text">Access Your Mailbox</h1>

        <div class="row center">
          <h5 class="header col s12 light">Enter your Ethereum address to proceed.</h5>
        </div>

        <div class="row">
          <form class="col s12">
            <div class="row">
              <div class="input-field col s12">
                <input placeholder="0x123f681646d4a755815f9cb19e1acc8565a0c2ac" id="address" type="text" class="validate">
                <label for="address">Ethereum address</label>
              </div>
            </div>
          </form>
        </div>

      </div>
    </div>

    <!-- No public key associated with given ethereum address -->
    <div class="section hide" id="setupMailbox">
      <div class="container">

        <h1 class="header center amber-text">Mailbox Setup</h1>

        <div class="row center">
          <h5 class="header col s12 light">No mailbox was found matching your address.</h5>
          <h5 class="header col s12 light">Setting up a new one for you ...</h5>
        </div>

        <!-- Progress bar for when keys are being generated -->
        <div class="progress" id="keygenProgress">
            <div class="indeterminate"></div>
        </div>

        <!-- Keygen is done -->
        <div class="row hide" id="keygenDone">

          <!-- Private key (TODO: consider copying this automatically into clipboard too) -->
          <div class="col s12 l6">
            <h2 class="header amber-text">Your Private Key</h2>
            <p>Copy this and store it somewhere safe. Your key is automatically stored in the browser cache, but if the cache is reset, you will have to input this again to read your messages.</p>
            <div class="card horizontal">
              <div class="card-stacked">
                <div class="card-content">
                  <p id="privateKey">-----BEGIN RSA PRIVATE KEY-----
MIIBOQIBAAJBAIOLepgdqXrM07O4dV/nJ5gSA12jcjBeBXK5mZO7Gc778HuvhJi+
RvqhSi82EuN9sHPx1iQqaCuXuS1vpuqvYiUCAwEAAQJATRDbCuFd2EbFxGXNxhjL
loj/Fc3a6UE8GeFoeydDUIJjWifbCAQsptSPIT5vhcudZgWEMDSXrIn79nXvyPy5
BQIhAPU+XwrLGy0Hd4Roug+9IRMrlu0gtSvTJRWQ/b7m0fbfAiEAiVB7bUMynZf4
SwVJ8NAF4AikBmYxOJPUxnPjEp8D23sCIA3ZcNqWL7myQ0CZ/W/oGVcQzhwkDbck
3GJEZuAB/vd3AiASmnvOZs9BuKgkCdhlrtlM6/7E+y1p++VU6bh2+mI8ZwIgf4Qh
u+zYCJfIjtJJpH1lHZW+A60iThKtezaCk7FiAC4=
-----END RSA PRIVATE KEY-----</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Public key, disable copying because it is not relevant -->
          <div class="col s12 l6">
            <h2 class="header amber-text">Your Public Key</h2>
            <p>This key has been stored on the blockchain. No need to save it! When people want to send messages to you, they will use your public key to encrypt messages meant for you.</p>
            <div class="card horizontal">
              <div class="card-stacked">
                <div class="card-content">
                  <p onmousedown='return false;' onselectstart='return false;' id="publicKey">-----BEGIN RSA PUBLIC KEY-----
MIIBCgKCAQEA+xGZ/wcz9ugFpP07Nspo6U17l0YhFiFpxxU4pTk3Lifz9R3zsIsu
ERwta7+fWIfxOo208ett/jhskiVodSEt3QBGh4XBipyWopKwZ93HHaDVZAALi/2A
+xTBtWdEo7XGUujKDvC2/aZKukfjpOiUI8AhLAfjmlcD/UZ1QPh0mHsglRNCmpCw
mwSXA9VNmhz+PiB+Dml4WWnKW/VHo2ujTXxq7+efMU4H2fny3Se3KYOsFPFGZ1TN
QSYlFuShWrHPtiLmUdPoP6CV2mML1tk+l7DIIqXrQhLUKDACeM5roMx0kLhUWB8P
+0uj1CNlNN4JRZlC7xFfqiMbFRU9Z4N6YwIDAQAB
-----END RSA PUBLIC KEY-----</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Button to proceed to #useMailbox -->
          <div class="col s12 center">
            <a href="#!" class="btn-large waves-effect waves-light amber confirmButton">I saved my private key. Onwards!</a>
          </div>

        </div>

      </div>
    </div>

    <!-- Public key found, load mailbox -->
    <div class="section hide" id="useMailbox">
      <div class="container">

        <h1 class="header center amber-text">Your Mailbox</h1>

      </div>
    </div>

  </main>

  <!-- Bundled script -->
  <script src="./bundle.js"></script>
</body>
</html>